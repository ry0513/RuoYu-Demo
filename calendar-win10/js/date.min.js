let lunarYearArr=[46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],lunarMonth=["正","二","三","四","五","六","七","八","九","十","冬","腊"],lunarDay=["一","二","三","四","五","六","七","八","九","十","初","廿"],tianGan=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],diZhi=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"];function hasLeapMonth(ly){return!!(15&ly)&&15&ly}function leapMonthDays(ly){return hasLeapMonth(ly)?983040&ly?30:29:0}function lunarYearDays(ly){let totalDays=0;for(let i=32768;i>8;i>>=1){let monthDays;totalDays+=ly&i?30:29}return hasLeapMonth(ly)&&(totalDays+=leapMonthDays(ly)),totalDays}function lunarYearMonths(ly){let monthArr=[];for(let i=32768;i>8;i>>=1)monthArr.push(ly&i?30:29);return hasLeapMonth(ly)&&monthArr.splice(hasLeapMonth(ly),0,leapMonthDays(ly)),monthArr}function getTianGan(ly){let tianGanKey=(ly-3)%10;return 0===tianGanKey&&(tianGanKey=10),tianGan[tianGanKey-1]}function getDiZhi(ly){let diZhiKey=(ly-3)%12;return 0===diZhiKey&&(diZhiKey=12),diZhi[diZhiKey-1]}Date.prototype.sloarToLunar=function(){sd=this.getDate(),sy=this.getFullYear(),sm=this.getMonth();let daySpan=(Date.UTC(sy,sm,sd)-Date.UTC(1949,0,29))/864e5+1,ly,lm,ld;for(let j=0;j<lunarYearArr.length;j++)if(daySpan-=lunarYearDays(lunarYearArr[j]),daySpan<=0){ly=1949+j,daySpan+=lunarYearDays(lunarYearArr[j]);break}for(let k=0;k<lunarYearMonths(lunarYearArr[ly-1949]).length;k++)if(daySpan-=lunarYearMonths(lunarYearArr[ly-1949])[k],daySpan<=0){lm=hasLeapMonth(lunarYearArr[ly-1949])&&hasLeapMonth(lunarYearArr[ly-1949])<=k?hasLeapMonth(lunarYearArr[ly-1949])<k?k:hasLeapMonth(lunarYearArr[ly-1949])===k?"闰"+k:k+1:k+1,daySpan+=lunarYearMonths(lunarYearArr[ly-1949])[k];break}return ld=daySpan,lm=hasLeapMonth(lunarYearArr[ly-1949])&&"string"==typeof lm&&lm.indexOf("闰")>-1?`闰${lunarMonth[/\d/.exec(lm)-1]}`:lunarMonth[lm-1],lm+="月",ly=getTianGan(ly)+getDiZhi(ly),ld<11?ld=`${lunarDay[10]}${lunarDay[ld-1]}`:ld>10&&ld<20?ld=`${lunarDay[9]}${lunarDay[ld-11]}`:20===ld?ld=`${lunarDay[1]}${lunarDay[9]}`:ld>20&&ld<30?ld=`${lunarDay[11]}${lunarDay[ld-21]}`:30===ld&&(ld=`${lunarDay[2]}${lunarDay[9]}`),{lunarYear:ly,lunarMonth:lm,lunarDay:ld}},Date.prototype.formatYMD=function(){return`${this.getFullYear()}年${this.getMonth()+1}月${this.getDate()}日`},Date.prototype.formatYM=function(mode){return"YYYY-MM-DD"===mode?{last:0===this.getMonth()?`${this.getFullYear()-1}-12`:`${this.getFullYear()}-${this.getMonth()}`,current:`${this.getFullYear()}-${this.getMonth()+1}`,next:11===this.getMonth()?`${this.getFullYear()+1}-1`:`${this.getFullYear()}-${this.getMonth()+2}`}:{last:0===this.getMonth()?`${this.getFullYear()-1}年12月`:`${this.getFullYear()}年${this.getMonth()}月`,current:`${this.getFullYear()}年${this.getMonth()+1}月`,next:11===this.getMonth()?`${this.getFullYear()+1}年1月`:`${this.getFullYear()}年${this.getMonth()+2}月`}},Date.prototype.thisMonth=function(){return`${this.getFullYear()}-${this.getMonth()+1}`},Date.prototype.isLeapYear=function(){return 0==this.getYear()%4&&(this.getYear()%100!=0||this.getYear()%400==0)},Date.prototype.days=function(){let day;return-1!==[1,3,5,7,8,10,12].indexOf(this.getMonth()+1)?day=31:-1!==[4,6,9,11].indexOf(this.getMonth()+1)?day=30:this.getMonth()+1===2&&(day=this.isLeapYear?29:28),day},Date.prototype.getdaylist=function(){let list=[],y=this.getFullYear(),m=this.getMonth()+1;for(let i=0;i<this.days();i++){let ymd=`${y}-${m}-${i+1}`;list[i]={date:ymd,num:i+1,lunar:"初一"===new Date(ymd).sloarToLunar().lunarDay?new Date(ymd).sloarToLunar().lunarMonth:new Date(ymd).sloarToLunar().lunarDay}}return list};